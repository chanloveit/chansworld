---
id: 3
title: "self-made 블로그 개발 노트 3장"
created_at: "2026-01-17"
category: "dev_blog"
auto_head_image: "/media/3.jpg"
---

youtube:8gwNwWneeyc

# __유튜브 임베드__

유튜브 영상을 글에 보여주고 싶다.  
당연히 별거 아닐 거라 생각했는데, 이거 덕분에 잠깐 골치 아팠다.  
iframe을 많이들 쓰던데, LiteYoutubeEmbed를 사용했다. 이쪽이 더 빠르다.  

<div className = "flex gap-2 justify-center items-start">
<figure>
	<img src = "/media/3-2.png"
       alt = "iframe의 경우"
       className = "mx-auto w-[50%]" />
	<figcaption className = 'text-center'>iframe의 경우</figcaption>
</figure>

<figure>
	<img src = "/media/3-1.png"
       alt = "LiteYoutubeEmbed의 경우"
       className = "mx-auto w-[50%]" />
	<figcaption className = 'text-center'>LiteYoutubeEmbed의 경우</figcaption>
</figure>
</div>  

스크립팅 - 렌더링까지 시간이 거의 5배 차이난다.  

기본적으로 유튜브 임베드는 영상의 id를 요구한다.   
https://youtube.com/watch?v=xxxx    
v=뒤 부분이 id에 해당한다. 

처음에는 마크다운에 유튜브 영상 링크를 삽입하고, a태그에서 처리하도록 했는데  
...

&nbsp;
p태그 안으로 article이 들어가는 문제가 생긴다.  
(LiteYoutubeEmbed는 article태그로 싸여 있다.)   
무슨 짓을 해도 유튜브 링크를 통째로 삽입하면 어디서 처리하든 같은 문제가 나더라.  

&nbsp;

그래서 그냥 무식하게 마크다운을 작성할 때 유튜브 영상의 경우,  
youtube:id  
로 쓰기로 했다. 멍청해 보이지만 링크를 통째로 삽입할 때의 정규 표현식이라던가 그런 거 생각 안하니까 편하긴 하다.  

마크다운을 렌더링할 때 p 태그의 내용이 youtube:로 시작하면  
그 문단은 그대로 렌더링하지 않고  LiteYoutubeEmbed 컴포넌트로 교체한다.

```tsx
<ReactMarkdown
	rehypePlugins = {[rehypeRaw]}
	remarkPlugins = {[remarkGfm]}
	components = {{
		p({ children }){
		if(typeof children == 'string' && children.startsWith('youtube:')){
			const videoId = children.replace('youtube:', '').trim();
			return <YoutubeEmbed videoId = {videoId} title = "Embedded Video" />;
		}	

		return <p className="mb-4 leading-loose">{children}</p>;
		},

		//기타 code, a, img 등등..
	}}
>{post.content}</ReactMarkdown>
```

* p안에 다른 block 요소가 들어가지 않는다  
* 서버와 클라이언트의 결과가 동일하다  
* hydration 오류가 사라진다

머리가 나쁘면 몸이 귀찮다. 