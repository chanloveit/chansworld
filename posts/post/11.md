---
id: 11
title: "iframe 가지고 놀기"
created_at: "2026-02-03"
category: "dev_etc"
auto_head_image: "/media/11.jpg"
featured: false
---

여러 탭을 왔다갔다 하면 귀찮으니까 한 화면에 다 담아보자.  
# [__Too-Many-Screens__](https://github.com/chanloveit/too-many-screens)
![too-many-screens](/media/11.jpg)

주소를 입력하면, 탭이 아니라 스크린으로 본다!  
iframe을 이용하는데, 보안 문제 때문에 차단을 걸어둔 사이트가 많아서 (ex. github, instagram etc...) 상당히 제한적이지만 뭐 어쩔 수 있나.  

그냥 아무 생각 없이 재미로 시작했는데, 조금 의미 있었다고 생각 드는 부분들을 정리해보겠다.  

## 드래그 / 리사이즈 (react-rnd)
Rnd는 드래그-앤-드랍, 크기 조절 라이브러리다. 온갖 속성을 제공해 주는데, 이 스크린이 어디에 있고, 얼마나 큰지를 전부 상태로서 관리할 수 있었다.  
```tsx
<Rnd default = {{x: screen.x, y: screen.y, width: screen.width, height: screen.height}} 
			minWidth = {320} 
			minHeight = {200} 
			className = 'border overflow-hidden' 
			dragHandleClassName = 'drag-handle'
			onDragStart = {() => setIsDragging(true)}
      onDragStop = {(e, d) => {setIsDragging(false); onUpdate({x: d.x, y: d.y});}}
			onResizeStop = {(e, direction, ref, delta, position) => {
				onUpdate({width: parseInt(ref.style.width),
								height: parseInt(ref.style.height),
								x: position.x,
								y: position.y
								 });
			}}
			cancel = '.cancel_drag'>

			{isDragging && (
        <div className='absolute inset-0 z-20' />
```
요 안에 iframe을 w-full h-full로 넣었다.  
한 가지 짚고 넘어갈 부분은 드래그를 위해 스크린 상단에 드래그 전용 drag-handle이라는 div를 넣은 거.  
Rnd는 기본적으로 내부 요소를 제외한 빈 공간을 drag handle로 사용하는데, iframe을 꽉 채우지 않으면 보기에 굉장히 별로인데, 꽉 채우면 드래그를 위한 여백이 안 남는다.  
정말 친절하게도, dragHandleClassName이라는 속성을 제공해서, 내가 원하는 지점에서 드래그할 수 있게 해주더라.  
난 스크린 상단에 투명한 div로 드래그 핸들을 줬다. 깔끔하니 보기 좋다.  

## 스크린 추가/삭제
useState, useEffect, 상태 관리에 대한 이해에 도움이 많이 되었다.  
그 왜, 리액트 공식 문서에 틱택토 만들기 하는 거랑 비슷한 느낌이랄까, 삭제 및 추가 기능을 만들어보면 확실히 프레임워크에 대해 잘 이해할 수 있다.  


## 고유 key
처음에는 map의 index를 key로 사용했는데, 스크린을 닫을 때 바로 뒤 인덱스의 스크린이 닫힌 스크린의 위치와 크기 같은 속성을 그대로 물려받는 문제가 생기더라.  
(std::vector의 erase()같은 느낌.)  

그래서 완전히 고유한 key값이 필요해서 Date.now()로 id를 부여하니, 스크린 삭제 이외 불필요한 동작이 사라졌다.  

## clean code
그냥... 블로그 만든 게 처음 Next.js/React로 뭔가 만든 건데, 그것보다 조금 더 clean해진 것 같다.. 